---
import { CardProject } from "@/components/cardProject";
import { TitleMenu } from "@/components/titleMenu";
import { getCollection } from "astro:content";

const projects = await getCollection("projects");
---

<section id="projects" class="w-full max-w-2xl mx-auto pt-40 mb-10 px-4 a">
  <TitleMenu
    client:load
    title="Projects"
    description="A collection of my favorite projects"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 256 256"
      class="size-6 transition-transform duration-300 group-hover:scale-110"
    >
      <path
        fill="currentColor"
        d="M229.18 173a6 6 0 0 1-2.16 8.2l-96 56a6 6 0 0 1-6 0l-96-56a6 6 0 0 1 6-10.36l93 54.23l93-54.23a6 6 0 0 1 8.16 2.16M221 122.82l-93 54.23l-93-54.23a6 6 0 0 0-6 10.36l96 56a6 6 0 0 0 6 0l96-56a6 6 0 0 0-6-10.36M26 80a6 6 0 0 1 3-5.18l96-56a6 6 0 0 1 6 0l96 56a6 6 0 0 1 0 10.36l-96 56a6 6 0 0 1-6 0l-96-56A6 6 0 0 1 26 80m17.91 0L128 129.05L212.09 80L128 31Z"
      ></path>
    </svg>
  </TitleMenu>

  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 py-4">
    {
      projects
        .toSorted((a, b) => b.data.date - a.data.date)
        .map((project, index) => (
          <CardProject client:load project={project.data}>
            <img
              transition:name={`image-${project.slug}`}
              src={project.data.image}
              alt={project.data.name}
              class="transition-transform duration-300 grayscale group-hover:grayscale-0 select-none pointer-events-none"
            />
          </CardProject>
        ))
    }
  </div>

  <div class="flex justify-center w-full mt-4">
    <a
      class="select-none inline-flex items-center gap-2 px-3 py-1.5 text-xs font-medium rounded-full transition-all duration-300
              bg-white/10 border shadow border-white/20 backdrop-blur-lg cursor-pointer hover:scale-105 active:scale-95 active:brightness-90 group/svg"
    >
      More projects
      <svg
        class="h-3.5 w-3.5 transition-transform duration-500 -translate-x-1 group-hover/svg:translate-x-0.5"
        viewBox="0 0 20 20"
        fill="currentColor"
        aria-hidden="true"
      >
        <path
          d="M7.5 5.5l5 4.5-5 4.5"
          stroke="currentColor"
          stroke-width="1.5"
          fill="none"
          stroke-linecap="round"
          stroke-linejoin="round"></path>
      </svg>
    </a>
  </div>
</section>
